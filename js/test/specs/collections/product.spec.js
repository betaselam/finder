// Jasmine Unit Testing Suite for Product Collection
// ---------------------------------------------
define(["jquery", "collections/ProductCollection"],
 function ($, ProductCollection) {

     // Test suite for Product Collection  
     describe("Product Collection", function () {

         // Runs before every Collection spec
         beforeEach(function () {

             // Instantiates a new Collection instance
             this.productCollection = new ProductCollection();

             // We are spying on the _validate method to see if it gets called
             spyOn(ProductCollection.prototype, "validate").andCallThrough();

         });

         // Check for valid collection length
         it("should be a valid collection length", function () {
             expect(this.productCollection.length).toEqual(0);
         });


         describe('calling parse', function () {
             beforeEach(function () {
                 this.productCollection = new ProductCollection();
             });

             it("should parse multiple products", function () {
                 this.productCollection.parse('<?xml version="1.0" encoding="UTF-8"?><ns2:SmallGroupProductQuoteResponse xmlns:ns2="http://rbis.cms.org/api" xmlns="http://rbis.cms.org/api-types">    <ns2:ResponseHeader>        <ReturnCode>Success</ReturnCode>    </ns2:ResponseHeader>    <ns2:TotalEligibleProductsQuanity>16</ns2:TotalEligibleProductsQuanity>    <ns2:PaginationInformation>        <PageNumber>1</PageNumber>        <PageSize>10</PageSize>    </ns2:PaginationInformation>    <ns2:Products>        <ns2:Product>            <ProductID>50727VA017</ProductID>            <ProductNameText>VA CLASSIC 02</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">INDEMNITY</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>500</Amount>                        <Amount>1000</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>20</Min>                    <Max>20</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>1000</Amount>                        <Amount>2000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>50727VA016</ProductID>            <ProductNameText>VA STANDARD</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">INDEMNITY</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>500</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>30</Min>                    <Max>30</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>3000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>50727VA015</ProductID>            <ProductNameText>VA ESSENTIAL</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">INDEMNITY</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>500</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>30</Min>                    <Max>30</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>3000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>93187VA001</ProductID>            <ProductNameText>Aetna Health Maintenance Organization</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>93187</IssuerID>            <IssuerNameText>Aetna</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18773363916</IssuerTollFreeNumber>            <IssuerLocalNumber>18773363916</IssuerLocalNumber>            <IssuerTTYNumber xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">HMO</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee>296.7522</AverageCostPerEnrollee>            <HSAEligibleIndicator>true</HSAEligibleIndicator>            <SameSexPartnerIndicator>true</SameSexPartnerIndicator>            <DomesticPartnerIndicator>true</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>0</Amount>                        <Amount>1500</Amount>                        <Amount>2000</Amount>                        <Amount>2500</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <Min>20</Min>                    <Max>30</Max>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>1500</Amount>                        <Amount>2000</Amount>                        <Amount>2500</Amount>                        <Amount>3000</Amount>                        <Amount>4000</Amount>                        <Amount>5000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>99663VA009</ProductID>            <ProductNameText>Coventry Health Care HMO</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>92</ProductApplicantsUpRatedPercentage>            <IssuerID>99663</IssuerID>            <IssuerNameText>Coventry Health Care of Virginia, Inc</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18004240077</IssuerTollFreeNumber>            <IssuerLocalNumber>18047473700</IssuerLocalNumber>            <IssuerTTYNumber xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">HMO</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>0</Amount>                        <Amount>500</Amount>                        <Amount>1000</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <Min>20</Min>                    <Max>50</Max>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>0</Min>                    <Max>30</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>3500</Amount>                        <Amount>4000</Amount>                        <Amount>5000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>93187VA002</ProductID>            <ProductNameText>Aetna Health Maintenance Organization</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>93187</IssuerID>            <IssuerNameText>Aetna</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18773363916</IssuerTollFreeNumber>            <IssuerLocalNumber>18773363916</IssuerLocalNumber>            <IssuerTTYNumber xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">POS</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee>315.1262</AverageCostPerEnrollee>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>true</SameSexPartnerIndicator>            <DomesticPartnerIndicator>true</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>0</Amount>                        <Amount>2500</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <Min>20</Min>                    <Max>30</Max>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>1500</Amount>                        <Amount>2000</Amount>                        <Amount>2500</Amount>                        <Amount>3000</Amount>                        <Amount>5000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>50727VA024</ProductID>            <ProductNameText>VA PPO AGHDHP Copay 11</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">PPO</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <HSAEligibleIndicator>true</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>2500</Amount>                        <Amount>3000</Amount>                        <Amount>4000</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <Min>30</Min>                    <Max>30</Max>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>0</Min>                    <Max>0</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>5000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>50727VA023</ProductID>            <ProductNameText>VA PPO AGHDHP Coins 11</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">PPO</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <HSAEligibleIndicator>true</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>1500</Amount>                        <Amount>2000</Amount>                        <Amount>2500</Amount>                        <Amount>3000</Amount>                        <Amount>4000</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>10</Min>                    <Max>20</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>5000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>38234VA002</ProductID>            <ProductNameText>Aetna Preferred Provider Organization</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>38234</IssuerID>            <IssuerNameText>Aetna</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18773363916</IssuerTollFreeNumber>            <IssuerLocalNumber>18773363916</IssuerLocalNumber>            <IssuerTTYNumber xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">PPO</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee>357.8873</AverageCostPerEnrollee>            <HSAEligibleIndicator>true</HSAEligibleIndicator>            <SameSexPartnerIndicator>true</SameSexPartnerIndicator>            <DomesticPartnerIndicator>true</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>0</Amount>                        <Amount>1000</Amount>                        <Amount>1500</Amount>                        <Amount>2000</Amount>                        <Amount>2500</Amount>                        <Amount>3000</Amount>                        <Amount>5000</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <Min>5</Min>                    <Max>30</Max>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>0</Min>                    <Max>30</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>1500</Amount>                        <Amount>2000</Amount>                        <Amount>2500</Amount>                        <Amount>3000</Amount>                        <Amount>4000</Amount>                        <Amount>5000</Amount>                        <Amount>6000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>        <ns2:Product>            <ProductID>50727VA027</ProductID>            <ProductNameText>VA Simplicity PPO 12</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <apit:ProviderType xmlns:apit="http://rbis.cms.org/api-types">PPO</apit:ProviderType><apit:TotalWrittenPremium xmlns:apit="http://rbis.cms.org/api-types">0</apit:TotalWrittenPremium>            <AverageCostPerEnrollee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <Min>40</Min>                    <Max>50</Max>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>0</Min>                    <Max>0</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>5000</Amount>                        <Amount>6000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>        </ns2:Product>    </ns2:Products>    <ns2:FilterAnalysis>        <ProviderTypes>            <ProviderType>HMO</ProviderType>            <Quantity>2</Quantity>        </ProviderTypes>        <ProviderTypes>            <ProviderType>POS</ProviderType>            <Quantity>2</Quantity>        </ProviderTypes>        <ProviderTypes>            <ProviderType>PPO</ProviderType>            <Quantity>8</Quantity>        </ProviderTypes>        <ProviderTypes>            <ProviderType>INDEMNITY</ProviderType>            <Quantity>4</Quantity>        </ProviderTypes>        <IssuerIDs>            <IssuerID>93187</IssuerID>            <IssuerName>Aetna</IssuerName>            <Quantity>2</Quantity>        </IssuerIDs>        <IssuerIDs>            <IssuerID>99663</IssuerID>            <IssuerName>Coventry Health Care of Virginia, Inc</IssuerName>            <Quantity>2</Quantity>        </IssuerIDs>        <IssuerIDs>            <IssuerID>16064</IssuerID>            <IssuerName>Anthem Health Plans of VA(Anthem BCBS)</IssuerName>            <Quantity>2</Quantity>        </IssuerIDs>        <IssuerIDs>            <IssuerID>50727</IssuerID>            <IssuerName>Humana Insurance Company</IssuerName>            <Quantity>7</Quantity>        </IssuerIDs>        <IssuerIDs>            <IssuerID>38234</IssuerID>            <IssuerName>Aetna</IssuerName>            <Quantity>2</Quantity>        </IssuerIDs>        <IssuerIDs>            <IssuerID>93848</IssuerID>            <IssuerName>Coventry Health &amp; Life Insurance Co.</IssuerName>            <Quantity>1</Quantity>        </IssuerIDs>        <HSAEligibleIndicator>            <Indicator>true</Indicator>            <Quantity>7</Quantity>        </HSAEligibleIndicator>        <HSAEligibleIndicator>            <Indicator>false</Indicator>            <Quantity>9</Quantity>        </HSAEligibleIndicator>        <DomesticPartnerIndicator>            <Indicator>true</Indicator>            <Quantity>4</Quantity>        </DomesticPartnerIndicator>        <DomesticPartnerIndicator>            <Indicator>false</Indicator>            <Quantity>12</Quantity>        </DomesticPartnerIndicator>        <SameSexIndicator>            <Indicator>true</Indicator>            <Quantity>4</Quantity>        </SameSexIndicator>        <SameSexIndicator>            <Indicator>false</Indicator>            <Quantity>12</Quantity>        </SameSexIndicator>        <MaternityInNetworkCoverageIndicator>            <Indicator>true</Indicator>            <Quantity>16</Quantity>        </MaternityInNetworkCoverageIndicator>        <MentalInNetworkCoverageIndicator>            <Indicator>true</Indicator>            <Quantity>16</Quantity>        </MentalInNetworkCoverageIndicator>        <PrescriptionInNetworkCoverageIndicator>            <Indicator>true</Indicator>            <Quantity>16</Quantity>        </PrescriptionInNetworkCoverageIndicator>    </ns2:FilterAnalysis>    <ns2:CompareProducts/>    <ns2:SmallGroupProductQuoteRequest>        <ns2:NumberOfEmployees>10</ns2:NumberOfEmployees>        <ns2:Location>            <ZipCode>22033</ZipCode>        </ns2:Location>        <ns2:InsuranceEffectiveDate>2013-11-01</ns2:InsuranceEffectiveDate>        <ns2:IsFilterAnalysisRequiredIndicator>true</ns2:IsFilterAnalysisRequiredIndicator>        <ns2:PaginationInformation>            <PageNumber>1</PageNumber>            <PageSize>10</PageSize>        </ns2:PaginationInformation>        <ns2:SortOrder>            <SortField>OOP LIMIT - IN NETWORK</SortField>            <SortDirection>ASC</SortDirection>        </ns2:SortOrder>        <ns2:Filter/>    </ns2:SmallGroupProductQuoteRequest></ns2:SmallGroupProductQuoteResponse>');
             });


             //             it("should throw error", function () {
             //                 this.planCollection.parse('<ns2:IndividualPlanBenefitResponsexmlns:ns2="http://rbis.cms.org/api"xmlns="http://rbis.cms.org/api-types"><ns2:ResponseHeader><ReturnCode>Error</ReturnCode><ErrorMessage>Requestisnotvalidfortheschema</ErrorMessage></ns2:ResponseHeader><ns2:PlanBenefits/></ns2:IndividualPlanBenefitResponse>');
             //             });

             it("should handle null gracefully", function () {
                 this.productCollection.parse(undefined);
             });

         });
         // Test spec for Product Collection instance and elements 
         describe("Product Collection Attributes ", function () {

           

         });

     });
 });