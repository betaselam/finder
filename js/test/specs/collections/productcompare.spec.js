// Jasmine Unit Testing Suite for Product Collection
// ---------------------------------------------
define(["jquery", "collections/ProductCompareCollection"],
 function ($, ProductCompareCollection) {

     // Test suite for ProductCompare Collection  
     describe("ProductCompare Collection", function () {

         // Runs before every Collection spec
         beforeEach(function () {

             // Instantiates a new Collection instance
             this.collection = new ProductCompareCollection();

             // We are spying on the _validate method to see if it gets called
             spyOn(ProductCompareCollection.prototype, "validate").andCallThrough();

         });

         describe('calling parse', function () {
             beforeEach(function () {
                 this.productCollection = new ProductCompareCollection();
             });

             it("should parse multiple products", function () {
                 this.productCollection.parse('<?xml version="1.0" encoding="UTF-8" standalone="yes"?><ns2:SmallGroupProductBenefitResponse xmlns:ns2="http://rbis.cms.org/api" xmlns="http://rbis.cms.org/api-types">    <ns2:ResponseHeader>        <ReturnCode>Success</ReturnCode>    </ns2:ResponseHeader>    <ns2:ProductBenefits>        <ns2:ProductBenefit>            <ProductID>50727VA016</ProductID>            <ProductNameText>VA STANDARD</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <ProviderType>INDEMNITY</ProviderType>            <AverageCostPerEnrollee xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>500</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>30</Min>                    <Max>30</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>3000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>            <IssuerURL>                <URLCode>Valid</URLCode>                <URLAddress>http://humana.com</URLAddress>                <AlternateText xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>            </IssuerURL>            <ProviderURL>                <URLCode>Not Valid</URLCode>                <URLAddress></URLAddress>                <AlternateText>No physician or hospital network</AlternateText>            </ProviderURL>            <ProductBenefitURL>                <URLCode>Valid</URLCode>                <URLAddress>http://apps.humana.com/marketing/documents.asp?file=55003</URLAddress>                <AlternateText></AlternateText>            </ProductBenefitURL>            <ProductFormularyURL>                <URLCode>Valid</URLCode>                <URLAddress></URLAddress>                <AlternateText>URL Pending Quality Evaluation</AlternateText>            </ProductFormularyURL>            <PrimaryCareVisit>Covered</PrimaryCareVisit>            <SpecialistVisit>Covered</SpecialistVisit>            <OtherPractitionerVisit>Covered</OtherPractitionerVisit>            <PreventiveCare>Covered</PreventiveCare>            <DiagnosticTest>Covered</DiagnosticTest>            <Imaging>Covered</Imaging>            <GenericDrugs>Covered</GenericDrugs>            <PreferredBrandDrugs>Covered</PreferredBrandDrugs>            <NonPreferredBrandDrugs>Covered</NonPreferredBrandDrugs>            <SpecialtyDrugs>Covered</SpecialtyDrugs>            <OutpatientFacilityFee>Covered</OutpatientFacilityFee>            <OutpatientPhysicianFee>Covered</OutpatientPhysicianFee>            <EmergencyRoom>Covered</EmergencyRoom>            <EmergencyTransportation>Covered</EmergencyTransportation>            <UrgentCare>Covered</UrgentCare>            <HospitalFacilityFee>Covered</HospitalFacilityFee>            <HospitalPhysicianFee>Covered</HospitalPhysicianFee>            <MentalOutpatient>Covered with Limitations</MentalOutpatient>            <MentalInpatient>Covered with Limitations</MentalInpatient>            <SubstanceDisorderOutpatient>Covered with Limitations</SubstanceDisorderOutpatient>            <SubstanceDisorderInpatient>Covered with Limitations</SubstanceDisorderInpatient>            <PrenatalPostnatalCare>Covered</PrenatalPostnatalCare>            <DeliveryInpatient>Covered</DeliveryInpatient>            <HomeHealthcare>Covered with Limitations</HomeHealthcare>            <OutpatientRehabilitation>Covered with Limitations</OutpatientRehabilitation>            <Habilitation>Covered with Limitations</Habilitation>            <NursingCare>Covered with Limitations</NursingCare>            <DurableMedicalEquipment>Covered</DurableMedicalEquipment>            <Hospice>Covered</Hospice>            <RoutineEyeCareChildren>Not Covered</RoutineEyeCareChildren>            <EyeGlassesChildren>Not Covered</EyeGlassesChildren>            <DentalCheckUpChildren>Not Covered</DentalCheckUpChildren>            <Acupuncture>Not Covered</Acupuncture>            <BariatricSurgery>Not Covered</BariatricSurgery>            <NonEmergencyTravelOutside>Covered</NonEmergencyTravelOutside>            <Chiropractic>Covered with Limitations</Chiropractic>            <CosmeticSurgery>Not Covered</CosmeticSurgery>            <DentalAdult>Not Covered</DentalAdult>            <HearingAid>Not Covered</HearingAid>            <InfertilityTreatment>Not Covered</InfertilityTreatment>            <LongTermCare>Not Covered</LongTermCare>            <PrivateNursing>Not Covered</PrivateNursing>            <EyeExamAdult>Not Covered</EyeExamAdult>            <RoutineFootCare>Not Covered</RoutineFootCare>            <WeightLossProgram>Not Covered</WeightLossProgram>        </ns2:ProductBenefit>        <ns2:ProductBenefit>            <ProductID>50727VA015</ProductID>            <ProductNameText>VA ESSENTIAL</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <ProviderType>INDEMNITY</ProviderType>            <AverageCostPerEnrollee xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>500</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>30</Min>                    <Max>30</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>3000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>            <IssuerURL>                <URLCode>Valid</URLCode>                <URLAddress>http://humana.com</URLAddress>                <AlternateText xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>            </IssuerURL>            <ProviderURL>                <URLCode>Not Valid</URLCode>                <URLAddress></URLAddress>                <AlternateText>No physician or hospital network</AlternateText>            </ProviderURL>            <ProductBenefitURL>                <URLCode>Valid</URLCode>                <URLAddress>http://apps.humana.com/marketing/documents.asp?file=55003</URLAddress>                <AlternateText></AlternateText>            </ProductBenefitURL>            <ProductFormularyURL>                <URLCode>Valid</URLCode>                <URLAddress></URLAddress>                <AlternateText>URL Pending Quality Evaluation</AlternateText>            </ProductFormularyURL>            <PrimaryCareVisit>Covered</PrimaryCareVisit>            <SpecialistVisit>Covered</SpecialistVisit>            <OtherPractitionerVisit>Covered</OtherPractitionerVisit>            <PreventiveCare>Covered</PreventiveCare>            <DiagnosticTest>Covered</DiagnosticTest>            <Imaging>Covered</Imaging>            <GenericDrugs>Covered</GenericDrugs>            <PreferredBrandDrugs>Covered</PreferredBrandDrugs>            <NonPreferredBrandDrugs>Covered</NonPreferredBrandDrugs>            <SpecialtyDrugs>Covered</SpecialtyDrugs>            <OutpatientFacilityFee>Covered</OutpatientFacilityFee>            <OutpatientPhysicianFee>Covered</OutpatientPhysicianFee>            <EmergencyRoom>Covered</EmergencyRoom>            <EmergencyTransportation>Covered</EmergencyTransportation>            <UrgentCare>Covered</UrgentCare>            <HospitalFacilityFee>Covered</HospitalFacilityFee>            <HospitalPhysicianFee>Covered</HospitalPhysicianFee>            <MentalOutpatient>Covered with Limitations</MentalOutpatient>            <MentalInpatient>Covered with Limitations</MentalInpatient>            <SubstanceDisorderOutpatient>Covered with Limitations</SubstanceDisorderOutpatient>            <SubstanceDisorderInpatient>Covered with Limitations</SubstanceDisorderInpatient>            <PrenatalPostnatalCare>Covered</PrenatalPostnatalCare>            <DeliveryInpatient>Covered</DeliveryInpatient>            <HomeHealthcare>Covered with Limitations</HomeHealthcare>            <OutpatientRehabilitation>Covered with Limitations</OutpatientRehabilitation>            <Habilitation>Covered with Limitations</Habilitation>            <NursingCare>Covered with Limitations</NursingCare>            <DurableMedicalEquipment>Covered</DurableMedicalEquipment>            <Hospice>Covered</Hospice>            <RoutineEyeCareChildren>Not Covered</RoutineEyeCareChildren>            <EyeGlassesChildren>Not Covered</EyeGlassesChildren>            <DentalCheckUpChildren>Not Covered</DentalCheckUpChildren>            <Acupuncture>Not Covered</Acupuncture>            <BariatricSurgery>Not Covered</BariatricSurgery>            <NonEmergencyTravelOutside>Covered</NonEmergencyTravelOutside>            <Chiropractic>Covered with Limitations</Chiropractic>            <CosmeticSurgery>Not Covered</CosmeticSurgery>            <DentalAdult>Not Covered</DentalAdult>            <HearingAid>Not Covered</HearingAid>            <InfertilityTreatment>Not Covered</InfertilityTreatment>            <LongTermCare>Not Covered</LongTermCare>            <PrivateNursing>Not Covered</PrivateNursing>            <EyeExamAdult>Not Covered</EyeExamAdult>            <RoutineFootCare>Not Covered</RoutineFootCare>            <WeightLossProgram>Not Covered</WeightLossProgram>        </ns2:ProductBenefit>        <ns2:ProductBenefit>            <ProductID>50727VA017</ProductID>            <ProductNameText>VA CLASSIC 02</ProductNameText>            <ProductApplicantsDeniedPercentage>0</ProductApplicantsDeniedPercentage>            <ProductApplicantsUpRatedPercentage>0</ProductApplicantsUpRatedPercentage>            <IssuerID>50727</IssuerID>            <IssuerNameText>Humana Insurance Company</IssuerNameText>            <IssuerStateCode>VA</IssuerStateCode>            <IssuerTollFreeNumber>18777204854</IssuerTollFreeNumber>            <IssuerLocalNumber>18777204854</IssuerLocalNumber>            <IssuerTTYNumber>18003252028</IssuerTTYNumber>            <ProviderType>INDEMNITY</ProviderType>            <AverageCostPerEnrollee xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>            <HSAEligibleIndicator>false</HSAEligibleIndicator>            <SameSexPartnerIndicator>false</SameSexPartnerIndicator>            <DomesticPartnerIndicator>false</DomesticPartnerIndicator>            <MaternityInNetworkCoverageIndicator>true</MaternityInNetworkCoverageIndicator>            <MentalInNetworkCoverageIndicator>true</MentalInNetworkCoverageIndicator>            <PrescriptionInNetworkCoverageIndicator>true</PrescriptionInNetworkCoverageIndicator>            <SubstanceAbuseInNetworkCoverageIndicator>true</SubstanceAbuseInNetworkCoverageIndicator>            <InNetworkCostSharing>                <AnnualDeductibleAmount>                    <Amounts>                        <Amount>500</Amount>                        <Amount>1000</Amount>                    </Amounts>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <Min>20</Min>                    <Max>20</Max>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <Amounts>                        <Amount>1000</Amount>                        <Amount>2000</Amount>                    </Amounts>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </InNetworkCostSharing>            <OutNetworkCostSharing>                <AnnualDeductibleAmount>                    <None>None</None>                </AnnualDeductibleAmount>                <PCPCopayAmount>                    <None>None</None>                </PCPCopayAmount>                <CoinsuranceRate>                    <None>None</None>                </CoinsuranceRate>                <AnnualOOPLimitAmount>                    <None>None</None>                </AnnualOOPLimitAmount>                <AnnualMaxBenefitAmount>                    <None>None</None>                </AnnualMaxBenefitAmount>            </OutNetworkCostSharing>            <IssuerURL>                <URLCode>Valid</URLCode>                <URLAddress>http://humana.com</URLAddress>                <AlternateText xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>            </IssuerURL>            <ProviderURL>                <URLCode>Not Valid</URLCode>                <URLAddress></URLAddress>                <AlternateText>No physician or hospital network</AlternateText>            </ProviderURL>            <ProductBenefitURL>                <URLCode>Valid</URLCode>                <URLAddress>http://apps.humana.com/marketing/documents.asp?file=60086</URLAddress>                <AlternateText></AlternateText>            </ProductBenefitURL>            <ProductFormularyURL>                <URLCode>Valid</URLCode>                <URLAddress></URLAddress>                <AlternateText>URL Pending Quality Evaluation</AlternateText>            </ProductFormularyURL>            <PrimaryCareVisit>Covered</PrimaryCareVisit>            <SpecialistVisit>Covered</SpecialistVisit>            <OtherPractitionerVisit>Covered</OtherPractitionerVisit>            <PreventiveCare>Covered</PreventiveCare>            <DiagnosticTest>Covered</DiagnosticTest>            <Imaging>Covered</Imaging>            <GenericDrugs>Covered</GenericDrugs>            <PreferredBrandDrugs>Covered</PreferredBrandDrugs>            <NonPreferredBrandDrugs>Covered</NonPreferredBrandDrugs>            <SpecialtyDrugs>Covered</SpecialtyDrugs>            <OutpatientFacilityFee>Covered</OutpatientFacilityFee>            <OutpatientPhysicianFee>Covered</OutpatientPhysicianFee>            <EmergencyRoom>Covered</EmergencyRoom>            <EmergencyTransportation>Covered</EmergencyTransportation>            <UrgentCare>Covered</UrgentCare>            <HospitalFacilityFee>Covered</HospitalFacilityFee>            <HospitalPhysicianFee>Covered</HospitalPhysicianFee>            <MentalOutpatient>Covered with Limitations</MentalOutpatient>            <MentalInpatient>Covered with Limitations</MentalInpatient>            <SubstanceDisorderOutpatient>Covered with Limitations</SubstanceDisorderOutpatient>            <SubstanceDisorderInpatient>Covered with Limitations</SubstanceDisorderInpatient>            <PrenatalPostnatalCare>Covered</PrenatalPostnatalCare>            <DeliveryInpatient>Covered</DeliveryInpatient>            <HomeHealthcare>Covered with Limitations</HomeHealthcare>            <OutpatientRehabilitation>Covered with Limitations</OutpatientRehabilitation>            <Habilitation>Covered with Limitations</Habilitation>            <NursingCare>Covered with Limitations</NursingCare>            <DurableMedicalEquipment>Covered</DurableMedicalEquipment>            <Hospice>Covered</Hospice>            <RoutineEyeCareChildren>Not Covered</RoutineEyeCareChildren>            <EyeGlassesChildren>Not Covered</EyeGlassesChildren>            <DentalCheckUpChildren>Not Covered</DentalCheckUpChildren>            <Acupuncture>Not Covered</Acupuncture>            <BariatricSurgery>Available for Additional Premium</BariatricSurgery>            <NonEmergencyTravelOutside>Covered</NonEmergencyTravelOutside>            <Chiropractic>Covered with Limitations</Chiropractic>            <CosmeticSurgery>Not Covered</CosmeticSurgery>            <DentalAdult>Not Covered</DentalAdult>            <HearingAid>Not Covered</HearingAid>            <InfertilityTreatment>Not Covered</InfertilityTreatment>            <LongTermCare>Not Covered</LongTermCare>            <PrivateNursing>Not Covered</PrivateNursing>            <EyeExamAdult>Not Covered</EyeExamAdult>            <RoutineFootCare>Not Covered</RoutineFootCare>            <WeightLossProgram>Not Covered</WeightLossProgram>        </ns2:ProductBenefit>    </ns2:ProductBenefits>    <ns2:SmallGroupProductBenefitRequest>        <ns2:ProductIDs>            <ns2:ProductID>50727VA017</ns2:ProductID>            <ns2:ProductID>50727VA016</ns2:ProductID>            <ns2:ProductID>50727VA015</ns2:ProductID>        </ns2:ProductIDs>    </ns2:SmallGroupProductBenefitRequest></ns2:SmallGroupProductBenefitResponse>');
             });


             //             it("should throw error", function () {
             //                 this.planCollection.parse('<ns2:IndividualPlanBenefitResponsexmlns:ns2="http://rbis.cms.org/api"xmlns="http://rbis.cms.org/api-types"><ns2:ResponseHeader><ReturnCode>Error</ReturnCode><ErrorMessage>Requestisnotvalidfortheschema</ErrorMessage></ns2:ResponseHeader><ns2:PlanBenefits/></ns2:IndividualPlanBenefitResponse>');
             //             });

             it("should handle null gracefully", function () {
                 this.productCollection.parse(undefined);
             });

         });
         // Check for valid collection length
         it("should be a valid collection length", function () {
             expect(this.collection.length).toEqual(0);
         });

     });
 });